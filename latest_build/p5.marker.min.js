// p5-marker v0.1.1 Sat Jan 21 2023 https://github.com/calebfoss/p5-marker.git
const t=/([A-Z])/g,e=/(?<!^)[A-Z]/g,s=t=>t+"$&",r=t=>t.replace(e,s("_")).toLowerCase(),i=t=>t.slice(0,1).toLowerCase()+t.slice(1),n=new RegExp("(?<![^\\.]\\.)\\b[a-z$_][a-z0-9$_]*\\b(?:(?!\\s*:)|(?<=\\?[^,]*))(?<!\\btrue\\b)(?<!\\bfalse\\b)(?<!\\bnew\\b)(?=(?:[^\"'`](?:([\"'`]).*\\1)*)*$)","gi");class o{static regex={legalVarName:"\\b[a-z$_][a-z0-9$_]*\\b",notExistingObjProp:"(?<![^\\.]\\.)",notNewObjProp:"(?:(?!\\s*:)|(?<=\\?[^,]*))",notBoolean:"(?<!\\btrue\\b)(?<!\\bfalse\\b)",notNewKeyword:"(?<!\\bnew\\b)",notProceededByOpenString:"(?=(?:[^\"'`](?:([\"'`]).*\\1)*)*$)",varName:n};static allQuotesMatched(t){const e=[/"/g,/'/g,/`/g];for(const s in e){const r=t.match(e[s]);if(r&&r.length%2!=0)return!1}return!0}static enclose=t=>{const e=t.replace(/(["'`]).*?\1/gi,""),s=e.split(/(?<!{[^}]*),/gi),r=e.match(/^[^\?\{]*:/gi);if(1===s.length&&!r)return t;return null!==t.match(/(?<!\([^\)]*)(?<!{[^}]*)[,:]/gi)?r?`{${t}}`:`[${t}]`:t};static escapes={LESS_THAN:"<",GREATER_THAN:">",AT_LEAST:">=",NO_MORE_THAN:"<=",AND:"&&",OR:"||",WHILE:""};static isP5=t=>p5.prototype.hasOwnProperty(t);static keywords=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","static","super","switch","this","throw","true","try","typeof","var","void","while","with","yield"];static getOwnerName(t,e){return o.keywords.includes(e)||e in o.escapes||e in globalThis?"none":e in t?"this":e in t.pInst&&"width"!==e&&"height"!==e?"pInst":"inherited"}static getPrefix(t,e){const s=o.getOwnerName(t,e);return"none"===s?"":"this"===s.slice(0,4)?`${s}.`:`_${s}.`}static replacePropName(t,e){return e in o.escapes?o.escapes[e]:o.getPrefix(t,e)+e}static replacePropNames(t,e){return e.replace(/UNTIL(.*)/,"!($1)").replace(o.regex.varName,(e=>o.replacePropName(t,e)))}}function a(t){for(const e in t)p5.prototype[e]={};Object.defineProperties(p5.prototype,t)}const c=(t,e)=>p5.prototype[t]=e(p5.prototype[t]),l=(...t)=>t.forEach((t=>p5.prototype[r(t)]=p5.prototype[t])),p=(...t)=>t.forEach((t=>a({[r(t)]:{get:function(){return this._renderer?.[`_${t}`]},set:function(e){Array.isArray(e)?this[t](...e):this[t](e)}}}))),h=t=>class extends t{create_camera(){this.pInst.createCamera()}create_shader(){this.pInst.createShader(...arguments)}},u=t=>class extends t{get NONE(){return"#0000"}},d=t=>class extends t{#t;#e;get stroke(){return this.#t}set stroke(t){const{pInst:e}=this;t===this.NONE?e.noStroke():e.stroke(t),this.#t=e.color(e._renderer.isP3D?e._renderer.curStrokeColor:e.drawingContext.strokeStyle)}get stroke_weight(){return this.#e}set stroke_weight(t){this.pInst.strokeWeight(t),this.#e=this.pInst._renderer.isP3D?this.pInst._renderer.curStrokeWeight:this.pInst.drawingContext.lineWidth}},_=t=>class extends(d(t)){#s;get fill(){return this.#s}set fill(t){const{pInst:e}=this;t===this.NONE?e.noFill():e.fill(t),this.#s=e.color(e._renderer.isP3D?e._renderer.curFillColor:e.drawingContext.fillStyle)}},y=t=>class extends t{lerp_color(){return this.pInst.lerpColor(...arguments)}},m=t=>class extends t{get delta_time(){return this.pInst.deltaTime}get screen(){return screen}};c("_createFriendlyGlobalFunctionBinder",(t=>function(e={}){return(s,r)=>{const i=Object.getOwnPropertyDescriptor(p5.prototype,s),n=e.globalObject||window;return void 0===i||i.writable?t.call(this,e)(s,r):Object.defineProperty(n,s,i)}})),p5.prototype.assignCanvas=function(t,e){this.noCanvas();const s=document.querySelector("main");let r=0;if(void 0===t.id)for(;document.querySelector(`p5MarkerCanvas${r}`);)r++;t.id=`p5MarkerCanvas${r}`,0===s.children.length&&s.remove(),e===this.WEBGL?this._setProperty("_renderer",new p5.RendererGL(t,this,!0)):this._setProperty("_renderer",new p5.Renderer2D(t,this,!0)),this._renderer._applyDefaults(),this._setProperty("_elements",[this._renderer])},p5.prototype.assets={},p5.prototype.loadAssets=async function(){const t=Array.from(document.querySelectorAll("p-asset")),e=this,s=t.map((t=>t.load(e)));(await Promise.all(s)).forEach(((e,s)=>this.assets[t[s].getAttribute("name")]=e)),this._decrementPreload()},p5.prototype.registerPreloadMethod("loadAssets",p5.prototype),p5.prototype._debug_attributes=!0,p5.prototype.create_canvas_element=function(t){const e=document.createElement(t);return this.canvas.appendChild(e),e.setup(this,this.canvas),e},a({object_assign:{set:function([t,...e]){Object.assign(t,...e)}},debug_attributes:{get:function(){return this._debug_attributes},set:function(t){const e=typeof t;"boolean"==typeof t?this._debug_attributes=t:console.error(`debug_attributes was set to a value of type ${e} but may only be set to a boolean true/false value.`)}}});const g=["debug_attributes","anchor","angle","scale_factor","shear","_default","repeat","change"],f=e=>class extends(m(y(u(h(e))))){#r;#i;#n;#o=new Proxy(this,{get:(t,e)=>e in t?t[e]:t.#a[e],has:(t,e)=>e in t||e in t.#a,set(t,e,s){t.set(e,s)}});#a={};#c=new Map;constructor(){super()}get above_sibling(){return this.previousElementSibling.this_element}get above_siblings_off(){if(this===this.parentElement.firstElementChild)return!0;const{above_sibling:t}=this;return!t.on&&t.above_siblings_off}#l(){const t=this.#a.change=this.#p(this.#a,"change",this);let e=!1;const s=(s,r)=>{if(r in s){const i=t[r];return e||=s[r]!==i,s[r]=i,this.pInst.debug_attributes&&this.setAttribute(r,i),!0}return!1};for(const e in t)s(this,e)||s(this.#a,e)||s(this.pInst,e)||console.error(`${this.constructor.elementName}'s change attribute has a prop called ${e} that is unknown`),this.#a[e]=t[e];return e}attributeInherited(t){const[e,...s]=t.split(".");return s.length?this.attributeInherited(e):!!this.parentElement.hasAttribute(t)||!!this.parentElement.attributeInherited&&this.parentElement.attributeInherited(t)}get blend_mode(){return this.pInst._renderer.isP3D?this.curBlendMode:this.pInst.drawingContext.globalCompositeOperation}set blend_mode(t){this.pInst.blendMode(t)}#h(t,e,s){if(this.#c.has(e)){return this.#c.get(e).call(s,this.pInst,t)}return e in t?t[e]:e in this.pInst?this.pInst[e]:void 0}get canvas(){return this.#r.this_element}colliding_with(t){return this.pInst.collide_elements(this,t)}get color_mode(){return this.pInst._colorMode}set color_mode(t){this.pInst.colorMode(t)}get#u(){return this.#d.split(/(?:\r\n|\r|\n)/).map((t=>t.match(/.{1,80}/g))).flat().map((t=>"//\t"+t))}set console_log(t){console.log(...arguments)}draw(t){if(this.hasAttribute("on")&&(this.#a.on=this.#p(t,"on",this.this_element),!this.#a.on))return;this.pInst.push(),this.updateState(t);const{WHILE:e}=p5.prototype;let s=!0;for(;s;){this.render?.();for(const t of this.children)t.draw(this.#a);s=this.hasAttribute("repeat")&&this.#a.repeat;const{change:r}=this.#a;if(Array.isArray(s)){const[t,...r]=this.#p(this.#a,"repeat");s=t===e===r.every((t=>t))}if(s){this.pInst.pop(),this.pInst.push();const e=this.#l(),i=this.#c.entries();for(const[e,s]of i)e in r==!1&&(this.#a[e]=this.#p(t,e,this));e||(s=!1)}this.endRender?.(this.#a)}this.pInst.pop()}get drawing_context(){return this.pInst.drawingContext}set drawing_context(t){Object.assign(this.pInst.drawingContext,t)}static get elementName(){return`p-${e=this.name,i(e).replaceAll(t,(t=>"-"+t.toLowerCase()))}`;var e}get erase(){return this.pInst._renderer._isErasing}set erase(t){!0===t?this.pInst.erase():!1===t?this.pInst.noErase():Array.isArray(t)?this.pInst.erase(...t):console.error(`${this.tagName}'s erase property was set using type ${typeof t}, but erase may only be set to a boolean or array.`)}get first_frame(){return 1===this.frame_count}get frame_count(){return this.pInst.frameCount-this.#i}get#d(){return this.outerHTML.replace(this.innerHTML,"")}get orderedAttributeNames(){const t=Array.from(this.attributes).sort((({name:t},{name:e})=>(g.indexOf(t)+1||g.indexOf("_default"))-(g.indexOf(e)+1||g.indexOf("_default")))).map((({name:t})=>t));return this.transformDoneIndex=t.findLastIndex((t=>g.includes(t)))+1,t}get parent_element(){return this.parentElement.this_element}get pInst(){return this.#n}set(t,e){t in this?(this.#c.set(t,(()=>this[t]=e)),this[t]=e):t in this.pInst?this.#c.set(t,(()=>this.pInst[t]=e)):this.#c.set(t,(()=>e)),this.#a[t]=e}setup(t,e){this.#n=t,this.#i=t.frameCount,this.#r=e,this.setDefaults?.(),this.#_?.(),this.setupRenderFunction?.();for(const s of this.children)s.setup(t,e)}#y(t){const e=t.value;!1===o.allQuotesMatched(e)&&console.error(`It looks like a ${this.constructor.elementName}'s ${t.name} attribute has an open string. Check that each string has a beginning and end character.`);const s=(t=>t in this?"this":t in this.pInst&&"function"!=typeof this.pInst[t]&&"width"!==t&&"height"!==t?"this.pInst":this.attributeInherited(t)?"inherited":void 0)(t.name),r=o.replacePropNames(this,t.name),i=o.replacePropNames(this,e),n=o.enclose(i),a=`return function ${`${this.constructor.name}_${t.name.replace(/[^a-z0-9]/g,"_")}`}(_pInst, _inherited) {`,c="inherited"!==s||t.name.includes(".")?`return ${r} = ${n};\n};`:`return ${n};\n}`,l=[a,...this.#u,c].join("\n"),p=new Function(l)();this.#c.set(t.name,p)}#_(){this.hasAttribute("repeat")&&!this.hasAttribute("change")&&(console.error(`It looks like a ${this.constructor.elementName} has a repeat attribute but does not have a change attribute. The change attribute is required to prevent infinite loops.`),this.removeAttribute("repeat"));const{orderedAttributeNames:t,transformDoneIndex:e}=this;for(let s=0;s<t.length;s++)s===e&&this.#c.set("transform_matrix",(function(){this.transform_matrix=this.pInst.transform_matrix})),this.#y(this.attributes[t[s]])}get this_element(){return this.#o}#p(t,e,s){"repeat"!==e&&"change"!==e||(t=this.#a);const r=this.#h(t,e,s);if(!1===this.pInst.debug_attributes)return r;if(this instanceof HTMLCanvasElement&&("width"===e||"height"===e))return r;if(e.match(/[\[\]]/))return r;return this.setAttribute(e,(t=>t instanceof p5.Color?t.toString(this.pInst.color_mode):void 0===t?.toString?t:t.toString())(r)),r}updateState(t){for(const e in t)e in this&&(this[e]=t[e]),this.#a[e]=t[e];const e=this.#c.entries();for(const[s,r]of e)this.#a[s]=this.#p(t,s,this);return this.#a}get webgl_attributes(){return this.pInst._glAttributes}set webgl_attributes(t){this.pInst.setAttributes(...arguments)}};class x extends(f(HTMLElement)){}class b extends x{constructor(t,e){super(),this.overloads=t,this.renderFunctionName=e||this.tagName.toLowerCase().slice(2).replace(/-./g,(t=>t[1].toUpperCase()))}#m(){const{overloads:t}=this,e=t=>t.match(/^\[.*\]$/);let s=!1;const r=t.map((t=>t.split(",").map((t=>t.trim())))).sort(((t,e)=>t.length-e.length));if(0===r.length)return[];for(let t=0;t<r.length;t++){const i=r[t];if(s=i.every((s=>this.hasAttribute(s)||this.attributeInherited(s)||e(s)||""===s||t===r.length-1&&this.attributeInherited(s))),s){const t=(s,r=[],i=0)=>{if(i===s.length)return r;const n=e(s[i]),o=s[i].replaceAll(/\[|\]/g,"");return this.hasAttribute(o)?t(s,r.concat({owner:this.this_element,param:o}),++i):n?r:this.attributeInherited(o)?t(s,r.concat({owner:this.this_element,param:o}),++i):r};return t(i)}}console.error(`Element ${this.tagName} does not have the required attributes to render and will be removed from the sketch`),this.remove()}setupRenderFunction(){const t=this.#m();this.render=function(){this.pInst[this.renderFunctionName](...t.map((({param:t,owner:e})=>e[t])))}}}customElements.define("p-_",class extends x{constructor(){super()}});const v=t=>class extends t{#g;get background(){return this.#g}set background(t){(t instanceof p5.Color||t instanceof p5.Image)&&(this.#g=t),this.#g=this.pInst.color(t)}get cursor(){return this.style.cursor}set cursor(t){const{pInst:e}=this;t===this.NONE?e.noCursor():Array.isArray(t)?e.cursor(...t):e.cursor(t)}get description(){const{pInst:t}=this,e=this.id,s=t.dummyDOM.querySelector(`#${e}_Description`);if(s)return s;return t.dummyDOM.querySelector(`#${e}_Label`)}set description(t){Array.isArray(t)?this.pInst.describe(...t):this.pInst.describe(t)}get height(){return this.pInst.height}set height(t){t===this.height||isNaN(t)||this.#f(this.width,t)}get orderedAttributeNames(){return super.orderedAttributeNames.filter((t=>"is"!==t&&"style"!=t))}set loop(t){t?this.pInst.loop():this.pInst.noLoop()}#f(t,e){if(t===this.width&&e===this.height)return;const{pInst:s}=this,r={};for(const t in s.drawingContext){const e=s.drawingContext[t];"object"!=typeof e&&"function"!=typeof e&&(r[t]=e)}s.width=s._renderer.width=t,s.height=s._renderer.height=e,this.setAttribute("width",t*s._pixelDensity),this.setAttribute("height",e*s._pixelDensity),this.style.width=`${t}px`,this.style.height=`${e}px`,s.drawingContext.scale(s._pixelDensity,s._pixelDensity);for(const t in r)try{s.drawingContext[t]=r[t]}catch(t){}s.drawingContext.scale(s._pixelDensity,s._pixelDensity),s.redraw()}get width(){return this.pInst.width}set width(t){t===this.width||isNaN(t)||this.#f(t,this.height)}},I=t=>class extends t{attributeInherited(t){return!(!this.hasAttribute(t)&&!(t in this.defaults))||super.attributeInherited(t)}runCode(){const t=this;new p5((e=>{t.defaults={x:0,x1:0,x2:0,x3:100,x4:100,cx:0,y:0,y1:0,y2:100,y3:100,y4:0,cy:0,z:0,w:100,h:100,d:100,size:100,start_angle:0,stop_angle:e.PI,vector:e.createVector(),v1:255,v2:255,v3:255,rx:1,ry:1,rz:-1,img:e.createImage(100,100),content:"",on:!0,repeat:!1,change:{}},e.preload=()=>e.loadAssets(),e.setup=function(){t.setup(e,t),t.width=100,t.height=100,t.background=e.color(0,0),e.assignCanvas(t,t.constructor.renderer)},e.draw=function(){const s=t.updateState(t.defaults);e.background(t.background);for(const e of t.children)e.draw?.(s)}}))}};class w extends(I(v(f(HTMLCanvasElement)))){static renderer="p2d";constructor(){super(),window.addEventListener("customElementsDefined",this.runCode.bind(this))}}customElements.define("p-canvas",w,{extends:"canvas"});class k extends(I(v(f(HTMLCanvasElement)))){#x;#b;#v;#I;static renderer="webgl";constructor(){super(),window.addEventListener("customElementsDefined",this.runCode.bind(this))}get bezier_detail(){return this.#x}set bezier_detail(t){this.pInst.bezierDetail(t),this.#x=this.pInst._bezierDetail}get camera(){return this.pInst._renderer._curCamera}set camera(t){const{pInst:e}=this;t instanceof p5.Camera?e.setCamera(t):Array.isArray(t)?e.camera(...t):e.camera(t)}get curve_detail(){return this.#b}set curve_detail(t){this.pInst.curveDetail(t),this.#b=this.pInst._curveDetail}get debug_mode(){return this.#v}set debug_mode(t){const{pInst:e}=this;if(!1===t)return e.noDebugMode(),void(this.#v=!1);!0===t?e.debugMode():Array.isArray(t)?e.debugMode(...t):e.debugMode(t),this.#v=!0}get orbit_control(){return this.#I}set orbit_control(t){return!1===t?this.#I=!1:(this.#I=!0,Array.isArray(t)?this.pInst.orbitControl(...t):void this.pInst.orbitControl())}set ortho(t){!0===t?this.pInst.ortho():Array.isArray(t)?this.pInst.ortho(...t):!1!==t&&this.pInst.ortho(t)}}customElements.define("p-canvas-3d",k,{extends:"canvas"}),p5.prototype._collide_debug=!1,p5.prototype.collide_debug=function(t){_collideDebug=t},p5.prototype.collider_type={point:"point",circle:"circle",ellipse:"ellipse",rect:"rect",line:"line",arc:"arc",triangle:"triangle",poly:"poly"},p5.prototype.collide_elements=function(t,e){const{collider:s}=t,{collider:r}=e,i=t.collision_args,n=e.collision_args,o=`collide_${s}_${r}`;if(o in this)return this[o](...i,...n);const a=`collide_${r}_${s}`;return a in this?this[a](...n,...i):(console.warn(`Collision check between ${s} and ${r} has not been implemented`),!1)},p5.prototype.collide_rect_rect=function(t,e,s,r,i,n,o,a){return t+s>=i&&t<=i+o&&e+r>=n&&e<=n+a},p5.prototype.collide_rect_rect_vector=function(t,e,s,r){return p5.prototype.collide_rect_rect(t.x,t.y,e.x,e.y,s.x,s.y,r.x,r.y)},p5.prototype.collide_rect_circle=function(t,e,s,r,i,n,o){var a=i,c=n;return i<t?a=t:i>t+s&&(a=t+s),n<e?c=e:n>e+r&&(c=e+r),this.dist(i,n,a,c)<=o/2},p5.prototype.collide_rect_circle_vector=function(t,e,s,r){return p5.prototype.collide_rect_circle(t.x,t.y,e.x,e.y,s.x,s.y,r)},p5.prototype.collide_circle_circle=function(t,e,s,r,i,n){return this.dist(t,e,r,i)<=s/2+n/2},p5.prototype.collide_circle_circle_vector=function(t,e,s,r){return p5.prototype.collide_circle_circle(t.x,t.y,e,s.x,s.y,r)},p5.prototype.collide_point_circle=function(t,e,s,r,i){return this.dist(t,e,s,r)<=i/2},p5.prototype.collide_point_circle_vector=function(t,e,s){return p5.prototype.collide_point_circle(t.x,t.y,e.x,e.y,s)},p5.prototype.collide_point_ellipse=function(t,e,s,r,i,n){var o=i/2,a=n/2;if(t>s+o||t<s-o||e>r+a||e<r-a)return!1;var c=t-s,l=e-r,p=a*this.sqrt(this.abs(o*o-c*c))/o;return l<=p&&l>=-p},p5.prototype.collide_point_ellipse_vector=function(t,e,s){return p5.prototype.collide_point_ellipse(t.x,t.y,e.x,e.y,s.x,s.y)},p5.prototype.collide_point_rect=function(t,e,s,r,i,n){return t>=s&&t<=s+i&&e>=r&&e<=r+n},p5.prototype.collide_point_rect_vector=function(t,e,s){return p5.prototype.collide_point_rect(t.x,t.y,e.x,e.y,s.x,s.y)},p5.prototype.collide_point_line=function(t,e,s,r,i,n,o){var a=this.dist(t,e,s,r),c=this.dist(t,e,i,n),l=this.dist(s,r,i,n);return void 0===o&&(o=.1),a+c>=l-o&&a+c<=l+o},p5.prototype.collide_point_line_vector=function(t,e,s,r){return p5.prototype.collide_point_line(t.x,t.y,e.x,e.y,s.x,s.y,r)},p5.prototype.collide_line_circle=function(t,e,s,r,i,n,o){var a=this.collide_point_circle(t,e,i,n,o),c=this.collide_point_circle(s,r,i,n,o);if(a||c)return!0;var l=t-s,p=e-r,h=this.sqrt(l*l+p*p),u=((i-t)*(s-t)+(n-e)*(r-e))/this.pow(h,2),d=t+u*(s-t),_=e+u*(r-e);return!!this.collide_point_line(d,_,t,e,s,r)&&(this._collideDebug&&this.ellipse(d,_,10,10),l=d-i,p=_-n,this.sqrt(l*l+p*p)<=o/2)},p5.prototype.collide_line_circle_vector=function(t,e,s,r){return p5.prototype.collide_line_circle(t.x,t.y,e.x,e.y,s.x,s.y,r)},p5.prototype.collide_line_line=function(t,e,s,r,i,n,o,a,c){var l=((o-i)*(e-n)-(a-n)*(t-i))/((a-n)*(s-t)-(o-i)*(r-e)),p=((s-t)*(e-n)-(r-e)*(t-i))/((a-n)*(s-t)-(o-i)*(r-e));if(l>=0&&l<=1&&p>=0&&p<=1){if(this._collideDebug||c)var h=t+l*(s-t),u=e+l*(r-e);return this._collideDebug&&this.ellipse(h,u,10,10),!c||{x:h,y:u}}return!!c&&{x:!1,y:!1}},p5.prototype.collide_line_line_vector=function(t,e,s,r,i){return p5.prototype.collide_line_line(t.x,t.y,e.x,e.y,s.x,s.y,r.x,r.y,i)},p5.prototype.collide_line_rect=function(t,e,s,r,i,n,o,a,c){var l,p,h,u,d;return c?d={left:l=this.collide_line_line(t,e,s,r,i,n,i,n+a,!0),right:p=this.collide_line_line(t,e,s,r,i+o,n,i+o,n+a,!0),top:h=this.collide_line_line(t,e,s,r,i,n,i+o,n,!0),bottom:u=this.collide_line_line(t,e,s,r,i,n+a,i+o,n+a,!0)}:(l=this.collide_line_line(t,e,s,r,i,n,i,n+a),p=this.collide_line_line(t,e,s,r,i+o,n,i+o,n+a),h=this.collide_line_line(t,e,s,r,i,n,i+o,n),u=this.collide_line_line(t,e,s,r,i,n+a,i+o,n+a)),!!(l||p||h||u)&&(!c||d)},p5.prototype.collide_line_rect_vector=function(t,e,s,r,i){return p5.prototype.collide_line_rect(t.x,t.y,e.x,e.y,s.x,s.y,r.x,r.y,i)},p5.prototype.collide_point_poly=function(t,e,s){for(var r=!1,i=0,n=0;n<s.length;n++){(i=n+1)===s.length&&(i=0);var o=s[n],a=s[i];(o.y>=e&&a.y<e||o.y<e&&a.y>=e)&&t<(a.x-o.x)*(e-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r},p5.prototype.collide_point_poly_vector=function(t,e){return p5.prototype.collide_point_poly(t.x,t.y,e)},p5.prototype.collide_circle_poly=function(t,e,s,r,i){void 0===i&&(i=!1);for(var n=0,o=0;o<r.length;o++){(n=o+1)===r.length&&(n=0);var a=r[o],c=r[n];if(this.collide_line_circle(a.x,a.y,c.x,c.y,t,e,s))return!0}if(!0===i&&this.collide_point_poly(t,e,r))return!0;return!1},p5.prototype.collide_circle_poly_vector=function(t,e,s,r){return p5.prototype.collide_circle_poly(t.x,t.y,e,s,r)},p5.prototype.collide_rect_poly=function(t,e,s,r,i,n){null==n&&(n=!1);for(var o=0,a=0;a<i.length;a++){(o=a+1)===i.length&&(o=0);var c=i[a],l=i[o];if(this.collide_line_rect(c.x,c.y,l.x,l.y,t,e,s,r))return!0;if(!0===n)if(this.collide_point_poly(t,e,i))return!0}return!1},p5.prototype.collide_rect_poly_vector=function(t,e,s,r){return p5.prototype.collide_rect_poly(t.x,t.y,e.x,e.y,s,r)},p5.prototype.collide_line_poly=function(t,e,s,r,i){for(var n=0,o=0;o<i.length;o++){(n=o+1)===i.length&&(n=0);var a=i[o].x,c=i[o].y,l=i[n].x,p=i[n].y;if(this.collide_line_line(t,e,s,r,a,c,l,p))return!0}return!1},p5.prototype.collide_line_poly_vector=function(t,e,s){return p5.prototype.collide_line_poly(t.x,t.y,e.x,e.y,s)},p5.prototype.collide_poly_poly=function(t,e,s){void 0===s&&(s=!1);for(var r=0,i=0;i<t.length;i++){(r=i+1)===t.length&&(r=0);var n=t[i],o=t[r],a=this.collide_line_poly(n.x,n.y,o.x,o.y,e);if(a)return!0;if(!0===s){if(a=this.collide_point_poly(e[0].x,e[0].y,t))return!0;if(a=this.collide_point_poly(t[0].x,t[0].y,e))return!0}}return!1},p5.prototype.collide_poly_poly_vector=function(t,e,s){return p5.prototype.collide_poly_poly(t,e,s)},p5.prototype.collide_point_triangle=function(t,e,s,r,i,n,o,a){var c=this.abs((i-s)*(a-r)-(o-s)*(n-r));return this.abs((s-t)*(n-e)-(i-t)*(r-e))+this.abs((i-t)*(a-e)-(o-t)*(n-e))+this.abs((o-t)*(r-e)-(s-t)*(a-e))===c},p5.prototype.collide_point_triangle_vector=function(t,e,s,r){return p5.prototype.collide_point_triangle(t.x,t.y,e.x,e.y,s.x,s.y,r.x,r.y)},p5.prototype.collide_point_point=function(t,e,s,r,i){return void 0===i&&(i=0),this.dist(t,e,s,r)<=i},p5.prototype.collide_point_point_vector=function(t,e,s){return p5.prototype.collide_point_point(t.x,t.y,e.x,e.y,s)},p5.prototype.collide_point_arc=function(t,e,s,r,i,n,o,a){void 0===a&&(a=0);var c=this.createVector(t,e),l=this.createVector(s,r),p=this.createVector(i,0).rotate(n),h=c.copy().sub(l);if(c.dist(l)<=i+a){var u=p.dot(h),d=p.angleBetween(h);if(u>0&&d<=o/2&&d>=-o/2)return!0}return!1},p5.prototype.collide_point_arc_vector=function(t,e,s,r,i,n){return p5.prototype.collide_point_arc(t.x,t.y,e.x,e.y,s,r,i,n)};const A=t=>class extends t{#w;#k;get x(){return this.#w}set x(t){isNaN(t)?console.error(`${this.tagName}'s x property is being set to ${t}, but it may only be set to a number`):this.#w=Number(t)}get y(){return this.#k}set y(t){isNaN(t)?console.error(`${this.tagName}'s y property is being set to ${t}, but it may only be set to a number`):this.#k=Number(t)}},E=t=>class extends(A(t)){#A;get z(){return this.#A}set z(t){isNaN(t)?console.error(`${this.tagName}'s z property is being set to ${t}, but it may only be set to a number`):this.#A=Number(t)}},N=t=>class extends t{#E;#N;get height(){return this.#E}set height(t){isNaN(t)?console.error(`${this.tagName}'s height is being set to ${t}, but it may only be set to a number.`):this.#E=Number(t)}get width(){return this.#N}set width(t){isNaN(t)?console.error(`${this.tagName}'s width is being set to ${t}, but it may only be set to a number.`):this.#N=Number(t)}},z=t=>class extends t{#z;#S;#M;#P;get x1(){return this.#z}set x1(t){isNaN(t)?console.error(`${this.tagName}'s x1 is being set to ${t}, but it may only be set to a number.`):this.#z=t}get y1(){return this.#S}set y1(t){isNaN(t)?console.error(`${this.tagName}'s y1 is being set to ${t}, but it may only be set to a number.`):this.#S=t}get x2(){return this.#M}set x2(t){isNaN(t)?console.error(`${this.tagName}'s x2 is being set to ${t}, but it may only be set to a number.`):this.#M=t}get y2(){return this.#P}set y2(t){isNaN(t)?console.error(`${this.tagName}'s y2 is being set to ${t}, but it may only be set to a number.`):this.#P=t}},S=t=>class extends t{#$;#C;get x3(){return this.#$}set x3(t){isNaN(t)?console.error(`${this.tagName}'s x3 is being set to ${t}, but it may only be set to a number.`):this.#$=t}get y3(){return this.#C}set y3(t){isNaN(t)?console.error(`${this.tagName}'s y3 is being set to ${t}, but it may only be set to a number.`):this.#C=t}},M=t=>class extends(z(S(t))){},P=t=>class extends t{#D;#O;get z1(){return this.#D}set z1(t){isNaN(t)?console.error(`${this.tagName}'s z1 is being set to ${t}, but it may only be set to a number.`):this.#D=t}get z2(){return this.#O}set z2(t){isNaN(t)?console.error(`${this.tagName}'s z2 is being set to ${t}, but it may only be set to a number.`):this.#O=t}},$=t=>class extends(z(P(t))){},C=t=>class extends t{#T;get rect_mode(){return this.#T}set rect_mode(t){this.pInst.rectMode(t),this.#T=this.pInst._renderer._rectMode}},D=t=>class extends t{#L=!0;#F="round";#V="miter";get smooth(){return this.#L}set smooth(t){if("boolean"!=typeof t)return console.error(`${this.tagName}'s smooth property is being set to ${t}, but it may only be set to true or false.`);t?this.pInst.smooth():this.pInst.noSmooth(),this.#L=t}get stroke_cap(){return this.#F}set stroke_cap(t){this.pInst.strokeCap(t),this.#F=this.pInst.drawingContext.lineCap}get stroke_join(){return this.#V}set stroke_join(t){this.pInst.strokeJoin(t),this.#V=this.pInst.drawingContext.lineJoin}},O=t=>class extends(S($(t))){#R;#X;#q;get y4(){return this.#q}set y4(t){isNaN(t)?console.error(`${this.tagName}'s y4 is being set to ${t}, but it may only be set to a number.`):this.#q=t}get z3(){return this.#R}set z3(t){isNaN(t)?console.error(`${this.tagName}'s z3 is being set to ${t}, but it may only be set to a number.`):this.#R=t}get z4(){return this.#X}set z4(t){isNaN(t)?console.error(`${this.tagName}'s z4 is being set to ${t}, but it may only be set to a number.`):this.#X=t}},T=t=>d(D(t)),L=t=>_(D(t)),F=t=>e=>{const s=new DOMPoint(e.x,e.y),{x:r,y:i}=t.pInst._transform_point_matrix(s,t.transform_matrix);return t.pInst.createVector(r,i)},V=t=>class extends t{#Y;#H;#W;#j;constructor(){super(["x, y, width, height, start_angle, stop_angle, [mode], [detail]"])}get mouse_over(){const{mouse_trans_pos_x:t,mouse_trans_pos_y:e}=this.pInst,{x:s,y:r,width:i,height:n,start_angle:o,stop_angle:a}=this;console.assert(i===n,"mouse_over currently only works for arc's with equal width and height.");const c=i/2,l=a-o,p=o+l/2;return this.pInst.collide_point_arc(t,e,s,r,c,p,l)}get start_angle(){return this.#Y}set start_angle(t){this.#Y=t}get stop_angle(){return this.#H}set stop_angle(t){this.#H=t}get mode(){return this.#W}set mode(t){this.#W=t}get detail(){return this.#j}set detail(t){this.#j=t}};class R extends(A(N(V(L(b))))){}customElements.define("p-arc",R);class X extends(A(N(_(b)))){constructor(){super(["x, y, width, [height]","x, y, width, height, [detail]"])}collider=p5.prototype.collider_type.ellipse;get collision_args(){const t=new DOMPoint(this.this_element.x,this.this_element.y),{x:e,y:s}=this.pInst._transform_point_matrix(t,this.transform_matrix),{pixel_density:r}=this.pInst,{w:i}=this.width*r,{h:n}=this.height*r||i;return[e,s,i,n]}get mouse_over(){const{mouse_trans_pos_x:t,mouse_trans_pos_y:e}=this.pInst,{x:s,y:r,width:i,height:n}=this.this_element;return this.pInst.collide_point_ellipse(t,e,s,r,i,n)}}customElements.define("p-ellipse",X);class q extends(A(L(b))){constructor(){super(["x, y, d"])}collider=p5.prototype.collider_type.circle;get collision_args(){const t=new DOMPoint(this.x,this.y),{x:e,y:s}=this.pInst._transform_point_matrix(t,this.transform_matrix);return[e,s,this.this_element.d*this.pInst.pow(this.pInst.pixel_density,2)]}get mouse_over(){const{mouse_trans_pos_x:t,mouse_trans_pos_y:e}=this.pInst,{x:s,y:r,d:i}=this.this_element;return this.pInst.collide_point_circle(t,e,s,r,i)}}customElements.define("p-circle",q);class Y extends($(T(b))){constructor(){super(["x1, y1, x2, y2","x1, y1, z1, x2, y2, z2"])}collider=p5.prototype.collider_type.line;get collision_args(){const t=new DOMPoint(this.this_element.x1,this.this_element.y1),{x:e,y:s}=this.pInst._transform_point_matrix(t,this.transform_matrix),r=new DOMPoint(this.this_element.x2,this.this_element.y2),{x:i,y:n}=this.pInst._transform_point_matrix(r,this.transform_matrix);return[e,s,i,n]}get mouse_over(){const{mouse_trans_pos_x:t,mouse_trans_pos_y:e}=this.pInst,{x1:s,y1:r,x2:i,y2:n}=this.this_element;return this.pInst.collide_point_line(t,e,s,r,i,n)}}customElements.define("p-line",Y);class H extends(E(T(b))){constructor(){super(["x, y, [z]"])}collider=p5.prototype.collider_type.circle;get collision_args(){const t=new DOMPoint(this.x,this.y),{x:e,y:s}=this.pInst._transform_point_matrix(t,this.transform_matrix),{stroke_weight:r}=this,{pixel_density:i}=this.pInst;return[e,s,r*this.pInst.pow(i,2)]}get mouse_over(){const{x:t,y:e,stroke_weight:s,pixel_density:r,mouse_trans_pos_x:i,mouse_trans_pos_y:n}=this,o=s*this.pInst.pow(r,2);return this.pInst.collide_point_circle(i,n,t,e,o)}}customElements.define("p-point",H);class W extends(O(L(b))){constructor(){super(["x1, y1, x2, y2, x3, y3, x4, y4, [detail_x], [detail_y]","x1, y1, z1, x2, y2, z2, x3, y3, z3, x4, y4, z4, [detail_x], [detail_y]"])}collider=p5.prototype.collider_type.poly;get collision_args(){return[this.vertices.map(F(this))]}get mouse_over(){const{mouse_trans_pos_x:t,mouse_trans_pos_y:e}=this.pInst;return this.pInst.collide_point_poly(t,e,this.vertices)}get vertices(){const{x1:t,y1:e,x2:s,y2:r,x3:i,y3:n,x4:o,y4:a}=this;return[this.pInst.createVector(t,e),this.pInst.createVector(s,r),this.pInst.createVector(i,n),this.pInst.createVector(o,a)]}}customElements.define("p-quad",W);class j extends(A(N(C(L(b))))){constructor(){super(["x, y, width, [h], [tl], [tr], [br], [bl]","x, y, width, height, [detail_x], [detail_y]"])}collider=p5.prototype.collider_type.rect;get collision_args(){const t=new DOMPoint(this.x,this.y),{x:e,y:s}=this.pInst._transform_point_matrix(t,this.transform_matrix),{pixel_density:r}=this.pInst;return[e,s,this.width*this.pInst.pow(r,2),this.height*this.pInst.pow(r,2)]}get mouse_over(){const{mouse_trans_pos_x:t,mouse_trans_pos_y:e}=this.pInst,{x:s,y:r,width:i,height:n}=this;return this.pInst.collide_point_rect(t,e,s,r,i,n)}}customElements.define("p-rect",j);class Z extends(A(C(L(b)))){#Z;constructor(){super(["x, y, size, [tl], [tr], [br], [bl]"])}collider=p5.prototype.collider_type.rect;get collision_args(){const t=new DOMPoint(this.x,this.y),{x:e,y:s}=this.pInst._transform_point_matrix(t,this.transform_matrix),{pixel_density:r}=this.pInst,{size:i}=this,n=i*this.pInst.pow(r,2);return[e,s,n,n]}get mouse_over(){const{mouse_trans_pos_x:t,mouse_trans_pos_y:e}=this.pInst,{x:s,y:r,s:i}=this;return this.pInst.collide_point_rect(t,e,s,r,i,i)}get size(){return this.#Z}set size(t){isNaN(t)?console.error(`${this.tagName}'s size is being set to ${t}, but it may only be set to a number.`):this.#Z=Number(t)}}customElements.define("p-square",Z);class B extends(M(L(b))){constructor(){super(["x1, y1, x2, y2, x3, y3"])}collider=p5.prototype.collider_type.poly;get collision_args(){return[this.vertices.map(F(this))]}get mouse_over(){const{mouse_trans_pos_x:t,mouse_trans_pos_y:e}=this.pInst,{x1:s,y1:r,x2:i,y2:n,x3:o,y3:a}=this;return this.pInst.collide_point_triangle(t,e,s,r,i,n,o,a)}get vertices(){const{x1:t,y1:e,x2:s,y2:r,x3:i,y3:n}=this;return[this.pInst.createVector(t,e),this.pInst.createVector(s,r),this.pInst.createVector(i,n)]}}customElements.define("p-triangle",B);class U extends(O(L(b))){constructor(){super(["x1, y1, x2, y2, x3, y3, x4, y4","x1, y1, z1, x2, y2, z2, x3, y3, z3, x4, y4, z4"])}}customElements.define("p-bezier",U);class G extends(O(L(b))){constructor(){super(["x1, y1, x2, y2, x3, y3, x4, y4","x1, y1, z1, x2, y2, z2, x3, y3, z3, x4, y4, z4"])}}customElements.define("p-curve",G);class J extends(L(b)){constructor(){super([""],"beginContour")}endRender(){this.pInst.endContour()}}customElements.define("p-contour",J);class Q extends(L(b)){constructor(){super(["[kind]"],"beginShape")}collider=p5.prototype.collider_type.poly;get collision_args(){return[this.vertices.map(F(this))]}endRender(t){t.hasOwnProperty("mode")?this.pInst.endShape(t.mode):this.pInst.endShape()}get vertices(){const t=e=>{const s=Array.from(e.children);return s.concat(s.map(t)).flat()},e=t(this).filter((t=>t instanceof K&&t.this_element)).map((t=>{if(t instanceof tt){const{x3:e,y3:s}=t;return this.pInst.createVector(e,s)}const{x:e,y:s}=t;return this.pInst.createVector(e,s)}));return e.concat(e.slice(0))}}customElements.define("p-shape",Q);class K extends(E(b)){constructor(){super(["x, y, [z], [u], [v]"])}}customElements.define("p-vertex",K);class tt extends b{constructor(){super(["cx, cy, x3, y3","cx, cy, cz, x3, y3, z3"])}}customElements.define("p-quadratic-vertex",tt);class et extends(E(b)){constructor(){super(["x, y","x, y, [z]"])}}customElements.define("p-curve-vertex",et),p5.prototype.window_resized=!1,c("_onresize",(t=>function(e){t.call(this,e),this._setProperty("window_resized",!0)})),p5.prototype.registerMethod("post",(function(){this._setProperty("window_resized",!1)})),p5.prototype._fullscreen=p5.prototype.fullscreen,p5.prototype._width=p5.prototype.width,p5.prototype._height=p5.prototype.height,p5.prototype._createDescriptionContainer=function(){const t=this.canvas.id,e=document.createElement("div");e.setAttribute("id",`${t}_Description`),e.setAttribute("role","region"),e.setAttribute("aria-label","Canvas Description");const s=document.createElement("p");return s.setAttribute("id",`${t}_fallbackDesc`),e.append(s),this.canvas.append(e),e};c("_describeHTML",(t=>function(e,s){const r=this.canvas.id,i=`#${r}_Description`;if("fallback"===e){if(this.dummyDOM.querySelector(i))t.call(this,e,s);else{this._createDescriptionContainer().querySelector(`#${r}_fallbackDesc`).innerHTML=s}this.descriptions.fallback=this.dummyDOM.querySelector(`#${r}_fallbackDesc`),this.descriptions.fallback.innerHTML=s}})),c("_describeElementHTML",(t=>function(e,s,r){const i=this.canvas.id;"fallback"!==e||this.dummyDOM.querySelector(`#${i}_Description`)||this._createDescriptionContainer(),t.call(this,e,s,r)})),c("_createOutput",(t=>function(e,s){const r=this.canvas.id;this.dummyDOM||(this.dummyDOM=document.getElementById(r).parentNode),"textOutput"!==e&&"gridOutput"!==e||this.dummyDOM.querySelector(`#${r}accessibleOutput${s}`)||this._createDescriptionContainer(),t.call(this,e,s)})),p5.prototype.registerMethod("post",(function(){(this.text_output||this.grid_output)&&this._updateAccsOutput()})),a({frame_rate:{get:function(){return this._frameRate},set:function(t){this.frameRate(t)}},fullscreen:{get:function(){return this._fullscreen()},set:function(t){this._fullscreen(t)}},window_width:{get:function(){return this.windowWidth}},window_height:{get:function(){return this.windowHeight}},grid_output:{get:function(){return this._accessibleOutputs.grid},set:function(t){!0===t?this.gridOutput():this.gridOutput(t)}},pixel_density:{get:function(){return this.pixelDensity()},set:function(t){this.pixelDensity(t)}},description:{set:function(t){this.describeElement(...t)}},display_density:{get:function(){return this.displayDensity()}},url:{get:function(){return this.getURL()}},url_path:{get:function(){return this.getURLPath()}},url_params:{get:function(){return this.getURLParams()}},log:{set:function(t){this.print(t)}},text_output:{get:function(){return this._accessibleOutputs.text},set:function(t){!0===t?this.textOutput():this.textOutput(t)}}});customElements.define("p-clear",class extends b{constructor(){super(["","r, g, b, a"])}});customElements.define("p-paint-bucket",class extends b{constructor(){super(["c","colorstring, [a]","gray, [a]","v1, v2, v3, [a]"],"background")}});class st extends HTMLLinkElement{static elementName="p-sketch";constructor(){super(),this.#B(this.href)}#U(t){const e=t.tagName,s=this.#G(e),r=document.createElement(...s);return this.#J(t,r),"custom"===e&&r.define(),r}#Q(t,e=document.body){const s=this.#U(t);e.appendChild(s);for(let e=0;e<t.children.length;e++)this.#Q(t.children[e],s)}#K(t){const e=t.target.response.documentElement;this.#Q(e),document.querySelectorAll("canvas").forEach((t=>t.runCode()))}#J(t,e){const s=t.attributes;for(let t=0;t<s.length;t++){const r=s[t];e.setAttribute(r.name,r.value)}}#B(t){if(!t)return console.error("p-sketch element is missing required path attribute");const e=new XMLHttpRequest;e.open("GET",t),e.responseType="document",e.overrideMimeType("text/xml"),e.addEventListener("load",this.#K.bind(this)),e.send()}#G(t){return"p-"===t.slice(0,2)?[t]:"canvas"===t?[t,{is:"p-canvas"}]:"canvas-3d"===t?["canvas",{is:"p-canvas-3d"}]:["p-"+t]}}customElements.define("p-sketch",st,{extends:"link"});customElements.define("p-custom",class extends x{constructor(){super(),this.attributes.length&&this.define(this)}define(){const t=this,e=t.getAttribute("name");customElements.define(`p-${e}`,class extends x{constructor(){super()}setDefaults(){Array.from(t.attributes).forEach((t=>!1===this.hasAttribute(t.name)&&this.setAttribute(t.name,t.value)));const e=Array.from(t.children).map((t=>t.cloneNode(!0)));this.prepend(...e)}renderToCanvas=null})}});class rt extends HTMLElement{static elementName="p-asset";constructor(){super()}static loadFns={image:"loadImage",font:"loadFont",json:"loadJSON",strings:"loadStrings",table:"loadTable",xml:"loadXML",bytes:"loadBytes",get:"httpGet",shader:"loadShader"};async load(t){if(this.data)return this.data;const e=rt.loadFns[this.getAttribute("type").toLowerCase()],s=this.getAttribute("path");return this.data=await t[e](s),this.data}}customElements.define("p-asset",rt);const it=t=>function(){const e=arguments;return 9!==e.length?t(...e):this.createVector(t(e[0],e[2],e[4],e[6],e[8]),t(e[1],e[3],e[5],e[7],e[8]))};p5.prototype.bezierPoint=it(p5.prototype.bezierPoint),p5.prototype.bezierTangent=it(p5.prototype.bezierTangent),p5.prototype.curvePoint=it(p5.prototype.curvePoint),p5.prototype.curveTangent=it(p5.prototype.curveTangent),p("ellipseMode","rectMode","curveTightness"),a({animate:{get:function(){return this.isLooping()},set:function(t){t?this.loop():this.noLoop()}},remove_canvas:{get:function(){return!1},set:function(){this.remove()}}}),l("selectAll","removeElements","createDiv","createP","createSpan","createImg","createA","createSlider","createButton","createCheckbox","createSelect","createRadio","createColorPicker","createInput","createFileInput","createVideo","createAudio","createCapture","createElement"),l("createStringDict","createNumberDict","matchAll","splitTokens"),p5.prototype.storage={},p5.prototype.registerMethod("init",(function(){this._setProperty("storage",new Proxy(this,{get:(t,e)=>"clear"===e?t.clearStorage:"remove"===e?t.removeItem:t.getItem(e),set:(t,e,s)=>(t.storeItem(e,s),!0)}))})),l("createVector"),a({angle_mode:{get:function(){return this._angleMode},set:function(t){this._setProperty("_angleMode",t)}},noise_detail:{set:function(){this.noiseDetail(...arguments)}},noise_seed:{set:function(){this.noiseSeed(...arguments)}},random_seed:{get:function(){return this._lcg_random_state},set:function(){this.randomSeed(...arguments)}}}),l("createCanvas","createGraphics");const nt=p5.prototype.createVector(),ot=p5.prototype.createVector(),at=p5.prototype.createVector(),ct=p5.prototype.createVector(1,1,1);p5.Renderer=function(t){function e(){t.apply(this,arguments),this._anchorStack=[nt.copy()],this._angleStack=[ot.copy()],this._scaleStack=[ct.copy()],this._shearStack=[at.copy()]}return e.prototype=Object.create(t.prototype),e}(p5.Renderer),c("push",(t=>function(){this._renderer._anchorStack.push(nt.copy()),this._renderer._angleStack.push(ot.copy()),this._renderer._scaleStack.push(ct.copy()),this._renderer._shearStack.push(at.copy()),t.call(this)})),c("pop",(t=>function(){this._renderer._anchorStack.pop(),this._renderer._angleStack.pop(),this._renderer._scaleStack.pop(),this._renderer._shearStack.pop(),t.call(this)})),p5.prototype.RESET="reset",a({anchor:{get:function(){return this._renderer?._anchorStack[this._renderer._anchorStack.length-1]},set:function(t){Array.isArray(t)?this._renderer._anchorStack[this._renderer._anchorStack.length-1].set(...t):this._renderer._anchorStack[this._renderer._anchorStack.length-1].set(t),this.translate(this.anchor)}},angle:{get:function(){return this._renderer?._angleStack.slice(-1)[0].z},set:function(t){this._renderer._angleStack[this._renderer._anchorStack.length-1].z=t,this.rotate(this.angle)}},angle_x:{get:function(){return this._renderer?._angleStack.slice(-1)[0].x},set:function(t){this._renderer._angleStack[this._renderer._angleStack.length-1].x=t,this.rotateX(this.angle_x)}},angle_y:{get:function(){return this._renderer?._angleStack.slice(-1)[0].y},set:function(t){this._renderer._angleStack[this._renderer._angleStack.length-1].y=t,this.rotateY(this.angle_y)}},angle_z:{get:function(){return this._renderer?._angleStack.slice(-1)[0].z},set:function(t){this._renderer._angleStack[this._renderer._angleStack.length-1].z=t,this.rotateZ(this.angle_z)}},angle_vector:{get:function(){return this._renderer?._angleStack.slice(-1)[0]},set:function(t){this._renderer._angleStack[this._renderer._angleStack.length-1]=t,this._renderer.isP3D?(this.rotateX(this.angle_x),this.rotateY(this.angle_y),this.rotateZ(this.angle_z)):this.rotate(this.angle)}},scale_factor:{get:function(){return this._renderer?._scaleStack.slice(-1)[0]},set:function(t){Array.isArray(t)?this._renderer._scaleStack[this._renderer._scaleStack.length-1].set(...t):this._renderer._scaleStack[this._renderer._scaleStack.length-1].set(t,t,t),this.scale(this.scale_factor)}},shear:{get:function(){return this._renderer?._shearStack.slice(-1)[0]},set:function(t){Array.isArray(t)?this._renderer._shearStack[this._renderer._shearStack.length-1].set(...t):this._renderer._shearStack[this._renderer._shearStack.length-1].set(t),this.shearX(this.shear.x),this.shearY(this.shear.y)}},transform_matrix:{get:function(){return this._renderer.isP3D?this._renderer.uMVMatrix:this.drawingContext?.getTransform()},set:function(t){t===this.RESET?this.resetMatrix():this.applyMatrix(t)}}});const lt=new DOMMatrix([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);p5.prototype._transform_point_matrix=function(t,e){const s=new DOMMatrix(lt).scale(this.pixel_density);return e.multiply(s).transformPoint(t)},p5.prototype.untransform_point=function(t,e,s){const r=new DOMPoint(t,e,s);return this._transform_point_matrix(r,this.transform_matrix)},p5.prototype.transform_point=function(t,e,s){const r=new DOMPoint(t,e,s);return this._transform_point_matrix(r,this.transform_matrix.inverse())},l("deviceOrientation","turnAxis","keyIsDown"),p5.prototype.device_moved=!1,p5.prototype.device_turned=!1,p5.prototype.mouse_down=!1,p5.prototype.mouse_up=!1,p5.prototype.mouse_dragging=!1,p5.prototype.mouse_double_clicked=!1,p5.prototype._mouseWheel=0,p5.prototype.key_down=!1,p5.prototype.key_up=!1,p5.prototype.touch_started=!1,p5.prototype.touch_moved=!1,p5.prototype.touch_ended=!1,p5.prototype._startAngleZ,c("_handleMotion",(t=>function(){t.call(this),this._setProperty("deviced_moved",!0)})),c("_onmousedown",(t=>function(e){t.call(this,e),this._setProperty("mouse_down",!0)})),c("_ondbclick",(t=>function(e){t.call(this,e),this._setProperty("mouse_double_clicked",!0)})),c("_onmousemove",(t=>function(e){t.call(this,e),this._setProperty("mouse_dragging",this.mouseIsPressed),this._setProperty("touch_moved",this.mouseIsPressed)})),c("_onwheel",(t=>function(e){t.call(this,e),this._setProperty("_mouseWheel",this._mouseWheelDeltaY)})),c("_onkeyup",(t=>function(e){t.call(this,e),this._setProperty("key_up",!0),this._setProperty("key_held",!1)})),c("_onkeydown",(t=>function(e){t.call(this,e),this._setProperty("key_down",!0)})),c("_ontouchbase",(t=>function(e){t.call(this,e),this._setProperty("touch_started",!0)})),c("_ontouchmove",(t=>function(e){t.call(this,e),this._setProperty("touch_moved",!0)})),c("_ontouchend",(t=>function(e){t.call(this,e),this._setProperty("touch_ended",!0)})),p5.prototype.registerMethod("pre",(function(){this._setProperty("mouse_up",0==this.mouseIsPressed&&1==this.mouse_held),this._setProperty("mouse_held",this.mouseIsPressed),this._setProperty("key_held",this.key_down)})),p5.prototype.registerMethod("post",(function(){this._setProperty("device_moved",!1),this._setProperty("mouse_down",!1),this._setProperty("mouse_dragging",!1),this._setProperty("mouse_double_clicked",!1),this._setProperty("_mouseWheel",!1),this._setProperty("key_up",!1),this._setProperty("key_down",!1),this._setProperty("touch_started",!1),this._setProperty("touch_moved",!1),this._setProperty("touch_ended",!1)})),p5.prototype._moveThreshold=.5,p5.prototype._shakeThreshold=30,a({device_acceleration:{get:function(){return this.createVector(this.accelerationX,this.accelerationY,this.accelerationZ)}},device_prev_acceleration:{get:function(){return this.createVector(this.pAccelerationX,this.pAccelerationY,this.pAccelerationZ)}},device_rotation:{get:function(){return this.createVector(this.rotationX,this.rotationY,this.rotationZ)}},device_prev_rotation:{get:function(){return this.createVector(this.pRotationX,this.pRotationY,this.pRotationZ)}},device_turned:{get:function(){return(null!==this.rotationX||null!==this.rotationY||null!==this.rotationZ)&&(this.rotationX!==this.pRotationX||this.rotationY!==this.pRotationY||this.rotationZ!==this.pRotationZ)}},first_frame:{get:function(){return 1===this.frameCount}},key_code:{get:function(){return this.keyCode}},mouse_button:{get:function(){return this.mouseButton}},mouse_pos:{get:function(){return this.createVector(this.mouseX,this.mouseY)}},mouse_pos_x:{get:function(){return this.mouseX}},mouse_pos_y:{get:function(){return this.mouseY}},mouse_prev_pos:{get:function(){return this.createVector(this.pmouseX,this.pmouseY)}},mouse_prev_pos_x:{get:function(){return this.pmouseX}},mouse_prev_pos_y:{get:function(){return this.pmouseY}},mouse_trans_pos:{get:function(){return this.transform_point(this.mouse_pos_x,this.mouse_pos_y)}},mouse_trans_pos_x:{get:function(){return this.mouse_trans_pos.x}},mouse_trans_pos_y:{get:function(){return this.mouse_trans_pos.y}},mouse_wheel:{get:function(){return this._mouseWheel}},mouse_window_pos:{get:function(){return this.createVector(this.winMouseX,this.winMouseY)}},mouse_window_pos_x:{get:function(){return this.winMouseX}},mouse_window_pos_y:{get:function(){return this.winMouseY}},mouse_prev_window_pos:{get:function(){return this.createVector(this.pwinMouseX,this.pwinMouseY)}},mouse_window_prev_pos_x:{get:function(){return this.pwinMouseX}},mouse_window_prev_pos_y:{get:function(){return this.pwinMouseY}},move_threshold:{get:function(){return this._moveThreshold},set:function(t){this.setMoveThreshold(t)}},moved:{get:function(){return this.createVector(this.movedX,this.movedY)}},moved_x:{get:function(){return this.movedX}},moved_y:{get:function(){return this.movedY}},pointer_lock_request:{get:function(){return document.pointerLockElement===this._curElement.elt},set:function(t){t?this.requestPointerLock():this.exitPointerLock()}},shake_threshold:{get:function(){return this._shakeThreshold},set:function(t){this.setShakeThreshold(t)}}});class pt extends(A(N(b))){constructor(){super(["img, x, y, [width], [height]","img, dx, dy, dWidth, dHeight, sx, sy, [sWidth], [sHeight]"])}get tint(){return this.pInst.color(this.pInst._renderer._tint)}set tint(t){t===this.pInst.NONE?this.pInst.noTint():this.pInst.tint(...arguments)}}customElements.define("p-image",pt),p("imageMode"),a({canvas_pixels:{get:function(){return this.loadPixels(),this.pixels},set:function(t){this.pixels=t,this.updatePixels()}}}),l("createWriter"),a({http_post:{set:function(){this.httpPost(...arguments)}},http_do:{set:function(){this.httpDo(...arguments)}},save_file:{set:function(){this.save(...arguments)}},save_json_file:{set:function(){this.saveJSON(...arguments)}},save_strings_file:{set:function(){this.saveStrings(...arguments)}},save_table_file:{set:function(){this.saveTable(...arguments)}}}),p("textAlign","textLeading","textSize","textStyle","textWrap","textFont"),l("textAscent","textDescent");class ht extends(_(b)){constructor(){super(["content, x, y, [x2], [y2]"])}}customElements.define("p-text",ht),p5.prototype.DEFAULT="default",p5.prototype.AMBIENT="ambient",p5.prototype.SPECULAR="specular",p5.prototype.EMISSIVE="emissive";class ut extends(_(b)){#tt;#et;#st;#rt;#it;get ambient_material(){return this.#tt}set ambient_material(t){Array.isArray(t)?this.pInst.ambientMaterial(...t):this.pInst.ambientMaterial(t),this.#tt=this.pInst.color(t)}get emissive_material(){return this.#et}set emissive_material(t){Array.isArray(t)?this.pInst.emissiveMaterial(...t):this.pInst.emissiveMaterial(t),this.#tt=this.pInst.color(t)}get normal_material(){return this.pInst._renderer.useNormalMaterial}set normal_material(t){t&&this.pInst.normalMaterial()}get shader(){return[this.pInst._renderer.userStrokeShader,this.pInst._renderer.userFillShader]}set shader(t){const{pInst:e}=this;t===e.DEFAULT?e.resetShader():e.shader(t)}get shininess(){return this.#st}set shininess(t){this.pInst.shininess(t),this.#st=t}get specular_material(){return this.#rt}set specular_material(t){Array.isArray(t)?this.pInst.specularMaterial(...t):this.pInst.specularMaterial(t),this.#rt=this.pInst.color(t)}get texture(){return this.pInst._renderer._tex}set texture(t){this.pInst.texture(t)}get texture_mode(){return this.pInst._renderer.textureMode}set texture_mode(t){this.pInst.textureMode(t)}get texture_wrap(){return[this.pInst._renderer.textureWrapX,this.pInst._renderer.textureWrapY]}set texture_wrap(t){Array.isArray(t)?this.pInst.textureWrap(...t):this.pInst.textureWrap(t)}get no_lights(){return this.#it}set no_lights(t){this.#it=t,1==t&&this.pInst.noLights()}}class dt extends b{draw(t){super.draw({...t,no_lights:!1})}}const _t=t=>class extends t{#nt;get specular_color(){return this.#nt}set specular_color(t){const{pInst:e}=this,s=Array.isArray(t)?e.color(...t):e.color(t);e.specularColor(s),this.#nt=s}},yt=t=>class extends t{#ot;get light_falloff(){return this.#ot}set light_falloff([t,e,s]){const{pInst:r}=this;r.lightFalloff(t,e,s),this.#ot=[r._renderer.constantAttenuation,r._renderer.linearAttenuation,r._renderer.quadraticAttenuation]}};class mt extends(E(b)){constructor(){super(["vector","x, y, z"])}}customElements.define("p-normal",mt);class gt extends(N(ut)){constructor(){super("[width], [height], [detail_x], [detail_y]")}}customElements.define("p-plane",gt);class ft extends(N(ut)){constructor(){super(["[width], [height], [depth], [detail_x], [detail_y]"])}}customElements.define("p-box",ft);customElements.define("p-sphere",class extends ut{constructor(){super(["[radius], [detail_x], [detail_y]"])}});customElements.define("p-cylinder",class extends ut{constructor(){super(["[radius], [height], [detail_x], [detail_y], [bottomCap], [topCap]"])}});customElements.define("p-cone",class extends ut{constructor(){super(["[radius], [height], [detail_x], [detail_y], [cap]"])}});customElements.define("p-ellipsoid",class extends ut{constructor(){super(["[radius_x], [radius_y], [radius_z], [detail_x], [detail_y]"])}});customElements.define("p-torus",class extends ut{constructor(){super(["[radius], [tubeRadius], [detailX], [detailY]"])}});customElements.define("p-load-model",class extends b{constructor(){super(["path, normalize, [successCallback], [failureCallback], [fileType]","path, [successCallback], [failureCallback], [fileType]"])}});customElements.define("p-model",class extends ut{constructor(){super(["model"])}});customElements.define("p-ambient-light",class extends dt{constructor(){super(["v1, v2, v3, [alpha]","gray, [alpha]","value","values","color"])}});class xt extends(_t(dt)){constructor(){super(["v1, v2, v3, x, y, z","v1, v2, v3, direction","color, x, y, z","color, direction"])}}customElements.define("p-directional-light",xt);class bt extends(yt(_t(dt))){constructor(){super(["v1, v2, v3, x, y, z","v1, v2, v3, position","color, x, y, z","color, position"])}}customElements.define("p-point-light",bt);class vt extends(_t(dt)){constructor(){super([""])}}customElements.define("p-lights",vt);class It extends(yt(_t(dt))){constructor(){super(["v1, v2, v3, x, y, z, rx, ry, rz, [angle], [concentration]","color, position, direction, [angle], [concentration]","v1, v2, v3, position, direction, [angle], [concentration]","color, x, y, z, direction, [angle], [concentration]","color, position, rx, ry, rz, [angle], [concentration]","v1, v2, v3, x, y, z, direction, [angle], [concentration]","v1, v2, v3, position, rx, ry, rz, [angle], [concentration]","color, x, y, z, rx, ry, rz, [angle], [concentration]"])}}customElements.define("p-spot-light",It);const wt=new Event("customElementsDefined");dispatchEvent(wt);
//# sourceMappingURL=p5.marker.min.js.map
 